language: java

install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -Dsign.skip=true -B -V

stages:
  - test
  - name: release
    if: tag IS present

jobs:
  include:
    - stage: test
    - stage: release
      script: mvn clean package -Dmaven.test.skip=true sign:sign deploy -B
      on:
        branch: master

jdk:
  - openjdk11
